{% extends "base.html" %} {% load static %} {% block title %}Shop{% endblock %}
{% block content %} {% include 'gradient.html' %}


<div class="container">
    <h2>Our Products</h2>

    <!-- Filtering and Sorting -->
    <div class="row">
        <div class="col-md-6">
            <select id="filter-category" class="form-control" onchange="filterProducts()">
                <option value="">Select Category</option>
                {% for category in categories %}
                <option value="{{ category.name }}">{{ category.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="col-md-6">
            <select id="sort-products" class="form-control" onchange="sortProducts()">
                <option value="">Sort By</option>
                <option value="price">Price</option>
                <option value="name">Name</option>
            </select>
        </div>
    </div>

    <!-- Products List -->
    <div class="row">
        {% for product in products %}
        <div class="col-md-4 col-sm-6">
            <div class="thumbnail">
                <img src="{{ product.image.url }}" alt="{{ product.image_alt_text }}" class="img-responsive">
                <div class="caption">
                    <h3>{{ product.name }}</h3>
                    <p>{{ product.description }}</p>
                    <p>Price: ${{ product.price }}</p>
                    <!-- Add to Cart Button (to be implemented later) -->
                    <!-- <button class="btn btn-primary">Add to Cart</button> -->
                </div>
            </div>
        </div>
        {% empty %}
        <p>No products found.</p>
        {% endfor %}
    </div>
</div>

<!-- reload the page with the selected query parameters.-->
<script type="text/javascript">
    function filterProducts() {
        var category = document.getElementById('filter-category').value;
        window.location.href = `?category=${category}`;
    }
    function sortProducts() {
        var sort = document.getElementById('sort-products').value;
        window.location.href = `?sort_by=${sort}`;
    }
</script>

{% endblock %}